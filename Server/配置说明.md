# 配置说明

## 数据库配置

数据库连接配置位于 `Server/src/main/resources/database.properties` 文件中。

### 配置项说明

```properties
# 数据库类型: postgresql, mysql, h2等
database.type=postgresql

# 数据库连接地址
database.host=localhost

# 数据库端口
database.port=5432

# 数据库名称
database.name=bookstore

# 数据库用户名
database.username=postgres

# 数据库密码
database.password=123456
```

### 配置优先级

1. **环境变量**（最高优先级）
   - `DATABASE_URL` - 完整的数据库连接URL
   - `DATABASE_USERNAME` - 数据库用户名
   - `DATABASE_PASSWORD` - 数据库密码

2. **database.properties 文件**
   - 修改 `Server/src/main/resources/database.properties` 文件

3. **默认值**（最低优先级）
   - 如果以上都未配置，使用 application.yml 中的默认值

### 使用环境变量（推荐）

在启动服务器前设置环境变量：

**Windows (PowerShell):**
```powershell
$env:DATABASE_URL="jdbc:postgresql://localhost:5432/bookstore"
$env:DATABASE_USERNAME="postgres"
$env:DATABASE_PASSWORD="your_password"
```

**Windows (CMD):**
```cmd
set DATABASE_URL=jdbc:postgresql://localhost:5432/bookstore
set DATABASE_USERNAME=postgres
set DATABASE_PASSWORD=your_password
```

**Linux/Mac:**
```bash
export DATABASE_URL="jdbc:postgresql://localhost:5432/bookstore"
export DATABASE_USERNAME="postgres"
export DATABASE_PASSWORD="your_password"
```

## 管理员账户配置

管理员账户配置位于 `Server/src/main/resources/admin.properties` 文件中。

### 配置项说明

```properties
# 默认管理员用户名
admin.username=admin

# 默认管理员密码（首次启动时如果不存在管理员账户，将使用此密码创建）
admin.password=admin123

# 默认管理员角色
admin.role=ADMIN

# 默认管理员全名
admin.full-name=系统管理员

# 是否自动创建默认管理员账户（如果不存在）
admin.auto-create=true
```

### 修改管理员密码

1. **修改配置文件**：编辑 `Server/src/main/resources/admin.properties`，修改 `admin.password` 的值
2. **重启服务器**：重启后，如果管理员账户不存在，将使用新密码创建
3. **注意**：如果管理员账户已存在，需要手动在数据库中更新密码，或删除后重新创建

### 禁用自动创建管理员

设置 `admin.auto-create=false`，服务器启动时将不会自动创建管理员账户。

## 安全建议

1. **生产环境**：
   - 使用环境变量存储敏感信息（数据库密码、管理员密码）
   - 不要将包含密码的配置文件提交到版本控制系统
   - 定期更换密码

2. **开发环境**：
   - 可以使用配置文件，但不要使用生产环境的密码
   - 建议将 `database.properties` 和 `admin.properties` 添加到 `.gitignore`

3. **配置文件位置**：
   - 配置文件位于 `Server/src/main/resources/` 目录
   - 修改后需要重新编译项目才能生效














